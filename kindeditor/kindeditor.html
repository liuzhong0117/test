<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>kindeditor</title>
	<link rel="stylesheet" href="./themes/default/default.css" />
	<link rel="stylesheet" href="./plugins/code/prettify.css" />
	<style>
		.ke-icon-gongshi {
	        background-image: url(./skins/default/default.gif);
	        background-position: 0px -672px;
	        width: 16px;
	        height: 16px;
		}
	  .ke-icon-audio {
	    background-position: 0px -528px;
	    width: 16px;
	    height: 16px;
	  }
	  .ke-content>img{
	  	height: 20px;
	  	width: 20px;
	  }
	</style>
</head>
<body>
	<audio src="horse.ogg" controls="controls"></audio><br />
a
</div>
<textarea name="content" id="kindeditor" cols="30" rows="10"></textarea>
<button onclick="insertHtml()">添加音频</button>
<button onclick="getHtml()">获取编辑器html代码</button>
<div>
    <h1>完整demo</h1>
    <script id="editor" type="text/plain" style="width:1024px;height:500px;"></script>
</div>
<script src="https://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
<script charset="utf-8" src="./kindeditor.js"></script>
<script charset="utf-8" src="./lang/zh_CN.js"></script>
<script charset="utf-8" src="./plugins/code/prettify.js"></script>

 <script type="text/javascript" charset="utf-8" src="ueditor/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="ueditor/ueditor.all.min.js"> </script>
<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
<script type="text/javascript" charset="utf-8" src="ueditor/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript" charset="utf-8" src="./ueditor/kityformula-plugin/addKityFormulaDialog.js"></script>
<script type="text/javascript" charset="utf-8" src="./ueditor/kityformula-plugin/getKfContent.js"></script>
<script type="text/javascript" charset="utf-8" src="./ueditor/kityformula-plugin/defaultFilterFix.js"></script>
<script>
	//实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
   var ue = UE.getEditor('editor', {
        toolbars: [[
            'fullscreen', 'source', '|',
            'bold', 'italic', 'underline', '|', 'fontsize', '|', 'kityformula', 'preview'
        ]]
    });
    ue.ready(function() {

	    console.log("ueditor is ready")
	    // UE.getEditor('editor').setHide()
    });

    function getPlainTxt() {
        var arr = [];
        arr.push("使用editor.getPlainTxt()方法可以获得编辑器的带格式的纯文本内容");
        arr.push("内容为：");
        arr.push(UE.getEditor('editor').getPlainTxt());
        console.log(arr.join('\n'))
        return UE.getEditor('editor').getPlainTxt();
    }


	KindEditor.lang({			
	 audio : 'MP3',
	 gongshi : "gongshi"
	});
	 KindEditor.options.htmlTags['audio'] = ['src','controls','autoplay','type'];
	 KindEditor.options.htmlTags['source'] = ['src','controls','autoplay','type'];
	 KindEditor.play = function(){
	 	console.log(111)
	 }
	 KindEditor.ready(function(K) {
		console.log("kindeditor ready")
        var options = {
		        cssPath : '/css/index.css',
		        filterMode : true,
		        items : ['source','audio','gongshi']
		};
		var editor = K.create('#kindeditor', options);
		window.insertHtml = function(){
			K.insertHtml('#kindeditor', '<audio controls src="horse.ogg"></audio>');
		}
		window.getHtml = function(){
			var html = editor.text();
			console.log(html)
		}
    });
</script>
</body>
</html>